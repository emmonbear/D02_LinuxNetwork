# Сети в Linux

## Содержание

1. [Part 1. Инструмент ipcalc](#part-1-инструмент-ipcalc)
2. [Part 2. Статическая маршрутизация между двумя машинами](#part-2-статическая-маршрутизация-между-двумя-машинами)
3. [Part 3. Утилита iperf3](#part-3-утилита-iperf3)
4. [Part 4. Сетевой экран](#part-4-сетевой-экран)
5. [Part 5. Статическая маршрутизация сети](#part-5-статическая-маршрутизация-сети)
6. [Part 6. Динамическая настройка IP с помощью DHCP](#part-6-динамическая-настройка-ip-с-помощью-dhcp)
7. [Part 7. NAT](#part-7-nat)
8. [Part 8. Дополнительно. Знакомство с SSH Tunnels](#part-8-дополнительно-знакомство-с-ssh-tunnels)

## Part 1. Инструмент ipcalc

Скачать утилиту **ipcalc**: `sudo apt install ipcalc`<br>
1. Сети и маски.<br>
    Определить и записать в отчет:<br>
    1. адрес сети **192.167.38.54/13**:<br>
        * `ipcalc 192.167.38.54/13`<br>
        ![part 1.1.1](screenshots/1.png)<br>
        **Адрес сети**: 192.160.0.0/13 <br>

    2. перевод маски **255.255.255.0** в префиксную и двоичную запись, **/15** в обычную и двоичную, **11111111.11111111.11111111.11110000** в обычную и префиксную:<br>
        1. перевод маски **255.255.255.0** в префиксную и двоичную запись:<br>
            * `ipcalc 255.255.255.0`<br>
            ![part 1.1.2](screenshots/2.png)<br>
            **Префисная запись**: 24<br>
            **Двоичная запись**: 11111111.11111111.11111111.00000000<br>
        2. перевод **/15** в обычную и двоичную запись:<br>
            * `ipcalc /15`<br>
            ![part 1.1.3](screenshots/3.png)<br>
            **Обычная запись**: 255.254.0.0<br>
            **Двоичная запись**: 11111111.11111111.00000000.00000000<br>
        3. перевод **11111111.11111111.11111111.11110000** в обычную и префиксную::<br>
            * `ipcalc /28`<br>
            ![part 1.1.4](screenshots/4.png)<br>
            **Обычная запись**: 255.255.255.240<br>
            **Префиксная запись**: 28<br>
    3. минимальный и максимальный хост в сети **12.167.38.4** при масках: **/8**, **11111111.11111111.00000000.00000000**, **255.255.254.0** и **/4**<br>
        1. минимальный и максимальный хост в сети **12.167.38.4/8**<br>
            * `ipcalc 12.167.38.4/8`<br>
            ![part 1.1.5](screenshots/5.png)<br>
            **минимальный хост**: 12.0.0.0/8<br>
            **максимальный хост**: 12.255.255.254<br>
        2. минимальный и максимальный хост в сети **12.167.38.4/16** (маска 11111111.11111111.00000000.00000000)<br>
            * `ipcalc 12.167.38.4/16`<br>
            ![part 1.1.6](screenshots/6.png)<br>
            **минимальный хост**: 12.167.0.1<br>
            **максимальный хост**: 12.167.255.254<br>
        3. минимальный и максимальный хост в сети **12.167.38.4/23** (маска 255.255.254.0)<br>
            * `ipcalc 12.167.38.4/23`<br>
            ![part 1.1.7](screenshots/7.png)<br>
            **минимальный хост**: 12.167.38.1<br>
            **максимальный хост**: 12.167.39.254<br>
        4. минимальный и максимальный хост в сети **12.167.38.4/4**<br>
            * `ipcalc 12.167.38.4/4`<br>
            ![part 1.1.8](screenshots/8.png)<br>
            **минимальный хост**: 0.0.0.1<br>
            **максимальный хост**: 15.255.255.254<br>

2. localhost.<br>
    Определить и записать в отчёт, можно ли обратиться к приложению, работающему на localhost, со следующими IP: **194.34.23.100**, **127.0.0.2**, **127.1.0.1**, **128.0.0.1**:<br>
    * Адрес **127.0.0.0** – **127.255.255.255** (loopback – петля на себя).   Данная сеть нужна для диагностики, соответственно, мы можем обратиться к приложению, работающему на этом хосте<br>
    Остальные IP-адреса зарезервированы для частых (локальных) сетей<br>
    ![part 1.2.1](screenshots/9.png)<br>
3. Диапазоны и сегменты сетей<br>
    Определить и записать в отчёт:<br>
    1. какие из перечисленных IP можно использовать в качестве публичного, а какие только в качестве частных: **10.0.0.45**, **134.43.0.2**, **192.168.4.2**, **172.20.250.4**, **172.0.2.1**, **192.172.0.1**, **172.68.0.2**, **172.16.255.255**, **10.10.10.10**, **192.169.168.1**<br>
        1. Публичные IP-адреса:<br>
            * 134.43.0.2<br>
            * 172.0.2.1<br>
            * 192.172.0.1<br>
            * 172.68.0.2<br>
            * 192.169.168.1<br>
        2. Частные IP-адреса:<br>
            * 10.0.0.45<br>
            * 192.168.4.2<br>
            * 172.20.250.4<br>
            * 10.10.10.10<br>
    2. какие из перечисленных IP адресов шлюза возможны у сети **10.10.0.0/18**: **10.0.0.1**, **10.10.0.2**, **10.10.10.10**, **10.10.100.1**, **10.10.1.255**<br>
        ![part 1.3.1](screenshots/10.png)<br>
        * Исходя из HostMin: **10.10.0.1** и HostMax: **10.10.63.254** возможные IP шлюзы: **10.10.0.2**, **10.10.10.10**, **10.10.1.255**<br>

## Part 2. Статическая маршрутизация между двумя машинами

P.S. Во избежание проблем с заданием  необходимо настроить VirtualBox: Добавить на машинах сетевой адаптер 2 (сетевой мост).<br>

Поднять две виртуальные машины (далее -- **ws1** и **ws2**).<br>

С помощью команды `ip a` посмотреть существующие сетевые интерфейсы<br>

* В отчёт поместить скрин с вызовом и выводом использованной команды<br>
![part 2.0.1](screenshots/11.png)<br>
![part 2.0.2](screenshots/12.png)<br>

Описать сетевой интерфейс, соответствующий внутренней сети, на обеих машинах и задать следующие адреса и маски: ws1 - **192.168.100.10**, маска **/16**, ws2 - **172.24.116.8**, маска **/12**<br>

* В отчёт поместить скрины с содержанием изменённого файла **etc/netplan/00-installer-config.yaml** для каждой машины.<br>
![part 2.0.3](screenshots/13.png)<br>
![part 2.0.4](screenshots/14.png)<br>

Выполнить команду `netplan apply` для перезапуска сервиса сети<br>

* В отчёт поместить скрин с вызовом и выводом использованной команды.<br>
![part 2.0.5](screenshots/15.png)<br>
![part 2.0.6](screenshots/16.png)<br>
---
1. Добавление статического маршрута вручную<br>

    1. Добавить статический маршрут от одной машины до другой и обратно при помощи команды вида `ip r add`<br>
    ![part 2.1.1](screenshots/17.png)<br>
    ![part 2.1.2](screenshots/18.png)<br>

    2. Пропинговать соединение между машинами<br>
    ![part 2.1.3](screenshots/19.png)<br>
    ![part 2.1.4](screenshots/20.png)<br>

2. Добавление статического маршрута с сохранением<br>

    Перезапустить машины:<br>
    `reboot`<br>
    1. Добавить статический маршрут от одной машины до другой с помощью файла **etc/netplan/00-installer-config.yaml**:<br>
    ![part 2.2.1](screenshots/21.png)<br>
    ![part 2.2.2](screenshots/22.png)<br>

    2. Пропинговать соединение между машинами:<br>
    Выполнить команду `sudo netplan apply`.<br>
    ![part 2.2.3](screenshots/23.png)<br>
    ![part 2.2.4](screenshots/24.png)<br>








## Part 3. Утилита iperf3

## Part 4. Сетевой экран

## Part 5. Статическая маршрутизация сети

## Part 6. Динамическая настройка IP с помощью DHCP

## Part 7. NAT

## Part 8. Дополнительно. Знакомство с SSH Tunnels





